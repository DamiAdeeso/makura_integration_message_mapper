ISO 20022 Bi-Directional Translation & Routing Service – Technical Design Document
________________________________________
1. Introduction & Context
ISO 20022 is the international standard for financial services messaging and forms the foundation for modern payment systems, replacing legacy proprietary formats like SWIFT MT. It defines standardized message sets (e.g., pacs, acmt) with structured business components and rich semantic meaning, enabling interoperability and automation across systems worldwide.
This platform is a real-time adapter/translation layer that:
•	Accepts existing system formats (JSON, SOAP, proprietary core banking XML).
•	Translates inbound requests into the correct ISO 20022 equivalent (pacs.008, pacs.028, acmt.023).
•	Optionally forwards the ISO message to a downstream system.
•	Maps downstream ISO responses (pacs.002, pacs.028, acmt.024) back to the source system’s expected response format.
•	Supports both API mode (HTTP/S endpoints) and Callable JAR mode (for in-process translation).
•	Includes a fully standalone Dashboard for configuration, mapping, and observability.
________________________________________
2. System Goals & Capabilities
Primary Functional Capabilities:
 1. Inbound Translation: Source system → ISO 20022.
 2. Outbound Translation: ISO 20022 → Source system.
 3. Configurable Routing: Forwarding or passive per route. 
4. Bi-Directional YAML Mapping for requests and responses.
 5. Dual Deployment Modes: API Service & Callable JAR. 
6. High Throughput, Low Latency: Synchronous real-time processing.
 7. Security & Licensing: API key with period validity. 
8. Observability & Dashboard: Previews, RBAC, metrics, logging.
________________________________________
3. Architectural Overview
3.1 Three Standalone Services






┌───────────────────────────────┐        ┌──────────────────────────────┐        ┌────────────────────────────┐
│ Dashboard Frontend (React)    │        │ Dashboard Backend (Spring)   │        │ Adapter Runtime Service     │
│ - UI/UX                       │◄──────►│ - REST API / Config Manager │◄──────►│ - API & JAR Translation     │
│ - Mapping builder             │        │ - YAML Generation           │        │ - Route Resolution          │
│ - Previews                    │        │ - Validation                │        │ - ISO Translation           │
│ - RBAC Enforcement            │        │ - RBAC / Audit              │        │ - Forwarding / Encryption   │
└─────────────┬─────────────────┘        └─────────────┬──────────────┘        └─────────────┬────────────┘
              │                                        │                                     │
              ▼                                        ▼                                     ▼
        User Browsers                            Config Database                       Runtime Cache / Keys / Schemas
Communication: - Dashboard frontend ↔ backend via REST API - Backend stores route/mapping config in DB + storage - Runtime service reads config from DB + storage, optional refresh via polling/pub-sub
________________________________________
3.2 Responsibilities per Service
Dashboard Frontend: - Visual field-to-field mapping builder - Preview of inbound → ISO and ISO → outbound transformations - RBAC enforced per user role - Route creation/editing interface
Dashboard Backend: - Stores YAML configurations and metadata - Generates, validates, version-controls YAML - Transformation validation and dry-run previews - RBAC, audit logging, API key management
Adapter Runtime Service: - High-throughput, low-latency real-time translations - Handles inbound requests and outbound responses - Supports forwarding (ACTIVE) and passive translation modes - Route resolution, encryption/decryption (AES, PGP) - API key validation & licensing enforcement - Metrics, logging, health checks
________________________________________
4. Message Handling & Routing
Supported ISO 20022 Messages: - pacs.008 — Customer Credit Transfer - pacs.002 — FI-to-FI Payment Status Report - pacs.028 — Payment Status Request - acmt.023 — Identification Verification Request - acmt.024 — Identification Verification Report
Bi-Directional Mapping Example (YAML):
routeId: SYSTEM_TO_NIP
inboundFormat: JSON
outboundFormat: ISO_XML
mode: ACTIVE
endpoint: "https://nip.bank/api/payments"
auth:
  type: API_KEY
  key: "abc123"
mappings:
  request:
    - from: source.customer.account
      to: iso:DebtorAccount/Identification
    - from: source.amount
      to: iso:InstructedAmount/Amount
  response:
    - from: iso:TxSts
      to: source.status
    - from: iso:ClrSysRef
      to: source.reference
________________________________________
5. Deployment Modes
API Mode: - REST/SOAP endpoints, Spring Boot - Receives requests and returns responses over HTTP/S
Callable JAR Mode: - Java interface (translateRequest, translateResponse) - Embeddable in existing Java apps, accessible from other systems via sidecar or gRPC
________________________________________
6. Route & Profile Configuration
•	Routes stored in DB, mapped to YAML profiles
•	Route attributes include ID, source/inbound format, ISO types, mode, endpoint, encryption, API key reference
•	YAML versioning with audit trail
•	Optional hot reload or refresh events
________________________________________
7. API Key Authentication & Licensing
•	API key per route
•	Validity period enforced
•	Admins manage keys via dashboard
•	Operator/viewer roles have limited access
________________________________________
8. Dashboard: Configuration, Previews & Observability
Configuration Capabilities: - Route creation/editing (ACTIVE/PASSIVE) - Visual mapping builder for request and response - Encryption type selection (PGP/AES) per route - Key reference configuration (Vault/Secrets, not raw keys) - YAML generation, validation, and versioning - Preview inbound → ISO and ISO → source transformations - RBAC and audit logging
Observability: - Metrics: throughput, latency, error rates per route - Structured logging & correlation ID - Optional tracing - Health checks (readiness/liveness)
________________________________________
9. Forwarding Security & Encryption
•	Supports AES and PGP per route
•	Encryption applied after mapping and before transport
•	Decryption applied before response mapping
•	Keys managed via secure references (Vault, secure FS)
•	Dashboard supports configuration and testing, admins only
________________________________________
10. Scalability & High Volume Operation
•	Runtime service stateless, horizontally scalable
•	Pre-compiled YAML rules, cached mappings
•	Non-blocking IO for downstream calls
•	Dashboard services scaled independently, low TPS
________________________________________
11. UML Sequence Diagrams
Active Route:
Source System -> Adapter: sendRequest()
Adapter -> AuthModule: validateApiKey()
Adapter -> Parser: parseInbound()
Parser -> CanonicalModel: mapToCanonical()
CanonicalModel -> Mapper: requestMap()
Mapper -> Backend: sendISO()
Backend -> Mapper: receiveISO()
Mapper -> CanonicalModel: mapFromISO()
CanonicalModel -> ResponseParser: mapToSource()
ResponseParser -> Source System: sendResponse()
Passive Route:
Source System -> Adapter: sendRequest()
Adapter -> AuthModule: validateApiKey()
Adapter -> Parser: parseInbound()
Parser -> CanonicalModel: mapToCanonical()
CanonicalModel -> Mapper: requestMap()
Mapper -> InternalLogic: generateISOResponse()
InternalLogic -> Mapper: ISOResponseMap()
Mapper -> ResponseParser: mapToSource()
ResponseParser -> Source System: sendResponse()
________________________________________
12. Example Java Interfaces (Callable JAR)
public interface IsoTranslator {
    IsoMessage translateRequest(SourceMessage request, String routeId);
    SourceMessage translateResponse(IsoMessage response, String routeId);
}

public class IsoTranslatorImpl implements IsoTranslator {
    @Override
    public IsoMessage translateRequest(SourceMessage request, String routeId) {
        return isoMessage;
    }

    @Override
    public SourceMessage translateResponse(IsoMessage response, String routeId) {
        return sourceMessage;
    }
}
________________________________________
13. Baseline Project Scaffold
iso-adapter/
├── dashboard-frontend/      # React SPA
├── dashboard-backend/       # Spring Boot REST
├── runtime-service/         # Spring Boot API & JAR engine
├── src/main/resources/
│   └── mappings/            # YAML mapping files per route
├── config/                  # Common configuration
├── pom.xml or build.gradle
└── README.md
________________________________________
14. References
•	ISO 20022 Official
•	ISO 20022 Message Definitions
•	ISO 20022 Reference Implementation
________________________________________
End of Document
